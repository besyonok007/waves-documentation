# Способы загрузки актуального блокчейна

После установки ноды, нужно загрузить актуальный блокчейн одним из описанных способов:

## 1. Синхронизация состояния во время обычной работы ноды

Сборка с нуля. Потребуется [запустить ноду](/waves-node/how-to-install-a-node/how-to-install-a-node.md), которая автоматически загрузит всю необходимую информацию из других нод.

После запуска, нода начнёт загружать блоки из сети, верифицировать их и проверять подписи. Всё это влияет на длительность процесса актуализации состояния. Следует учитывать следующие факторы:

* Пропускная способность интернет канала
* Задержка сети (network latency)
* Количество подключенных узлов
  
  Первые два зависят от интернет провайдера, а третий зависит от параметра `max-outbound-connections`. Мы считаем, достаточным значение 30 (по умолчанию). В целом скорость интернет подключения не сильно влияет на процесс (если конечно речь не идёт о dial-up подключении). Гораздо сильнее влияет время затраченное не верификацию блоков и подписей. Эти факторы будут рассмотрены в далее в этой статье.

## 2. Импорт состояния из ранее подготовленного файла

Перед импортом блоков необходимо остановить ноду.

> [!TIP]
> Чтобы осуществить импорт, выполните шаги, описанные в статье по ссылке ниже.

{% prettylink link="../waves-node/options-for-getting-actual-blockchain/import-from-the-blockchain.md" %} Import From Blockchain {% endprettylink %}

Если нода находится на форке с выше 2000 блоков, она должна выбрать способ получения актуального блокчейна. Этого можно добиться, если одновить ноду и импортировать блокчейн.

> [!DANGER]
> Если Ваша нода находится на форке и Вы хотите её обновить, пожалуйста не экспортируйте/импортируйте свой блокчейн, а загрузите актуальную версию экспортированного блокчейна по ссылкам нижу (файл blockchain_last.tar) иначе ваша нода останется на форке.

{% prettylink link="http://blockchain.wavesnodes.com" %} Mainnet {% endprettylink %}
{% prettylink link="http://blockchain.testnet.wavesnodes.com" %} Testnet {% endprettylink %}

Скорость верификации блоков и подписей влияет на общее время актуализации состояния при импорте. Эти операции выполняет процессор. Верификация блоков выполняется одним потоком, поэтому такой процесс будет выполняться быстрее одноядерным высокочастотным процессором чем многоядерным. Верифкация подписей многопоточна, но, по сравнению с верификацией блоков,её эффект незначителен. Другими словами, в данном случае нет почти никакой разницы 8 или 16 ядер процессора работают на одинаковой частоте.

При синхронизации состояния, скорость активной записи на диск превышает максимальную скорость, с которой работает HDD. Могут возникать задержки, когда операционной системе не хватает физической памяти. Мы рекомендуем иметь как минимум 30% общего объема памяти для нужд операционной системы \(cache/buffers\).  
Поэтому, мы выбираем SSD.

## 3. Скопируйте базу данных ноды

[_**Загрузка состояния**_](/waves-node/options-for-getting-actual-blockchain/state-downloading-and-applying.md), приблизительный размер базы - 23 GB \(**в Ноябре 2018**\).

В данном случае, самая долгая операция это загрузка архива. После закгрузки необходимо распаковать архив в папку /var/lib/waves/data и запустить ноду. Остальные блоки синхронизируются во время работы.

## Статистика \(0-1220000\)

Верификация блоков это не линейная операция, “тяжелые” блоки верифицируются дольше. ”Тяжесть" блока определяется по колучитсву и типу транзакций, которые он содержит.  Первые блоки \(например, первые 200.000\) пустые и верифицируются гораздо быстрее чем то же количество после миллиона. На схеме это выглядит так:

![](../_assets/statistics_blocks_receiving.png)

Время, которое потребуется, чтобы достичь блока 1220000 на различных ЦПУ \(с разными частотам и количетсвом ядер\):

| CPU/MEM | Длительность синхронизации | Длительность импорта |
| :--- | :--- | :--- |
| Intel Xeon Platinum 8175M @ 2.50 GHz \(8 vCPU\)/32 GB | 11:25. | 10:20. |
| Intel Xeon Platinum 8124M @ 3.00 GHz \(16 vCPU\)/32 GB | 10:45. | 10:05 |
| Intel i7 8550u @ 1.8 GHz \(up to 4GHz\) \(8 vCPU\)/16 GB | 9:35. | 9:20. |

{% prettyhint type="info" %} Более подробно каждый из способов описан в соответствующих статьях.{% endprettyhint %}